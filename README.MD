# ğŸš€ CLI Scraper

## ğŸ¯ Objetivos do Projeto

Este projeto foi desenvolvido como parte do **roadmap de aperfeiÃ§oamento tÃ©cnico - Fase 1**, focando em:

- âœ… **Advanced JavaScript (ES2025) & TypeScript** - Generics, tipos condicionais, decorators
- âœ… **Node.js Internals** - Event loop, streams, worker threads, clustering
- âœ… **Asynchronous Patterns** - Promises, async iterators, concorrÃªncia controlada

---

## ğŸ› ï¸ Tecnologias & Conceitos Aplicados

### **TypeScript AvanÃ§ado**

- **Generics com Constraints**: `ScrapingTarget<T>`, `ApiResponse<T>`
- **Tipos Condicionais**: `T extends string ? A : B`
- **Mapped Types**: `{ readonly [K in keyof T]: T[K] }`
- **Utility Types**: `PartialExcept<T, K>`, `DeepReadonly<T>`
- **Decorators**: `@measure`, `@retry` para metaprogramaÃ§Ã£o

### **Node.js Internals**

- **Worker Threads**: Processamento paralelo real sem bloqueio
- **Streams API**: Transform e Writable streams customizados
- **Event Loop**: Aproveitamento mÃ¡ximo da concorrÃªncia
- **Back-pressure**: Controle automÃ¡tico de fluxo de dados

### **PadrÃµes AssÃ­ncronos**

- **Async Iterators**: `async function*` e `for await`
- **Promise Queuing**: Controle de concorrÃªncia com `p-queue`
- **Pipeline Streams**: Processamento eficiente de dados
- **MessageChannel**: ComunicaÃ§Ã£o entre threads

---

## ğŸ“¦ InstalaÃ§Ã£o

```bash
npm install
npm run build

```

## ğŸš€ Uso

### **Comandos BÃ¡sicos**

```bash
# Scraping simples
node dist/index.js scrape https://httpbin.org/json

# MÃºltiplas URLs com saÃ­da para arquivo
node dist/index.js scrape \
  https://httpbin.org/json \
  https://jsonplaceholder.typicode.com/posts/1 \
  --output results.json

node dist/index.js scrape \
  https://api.github.com/users/octocat \
  https://api.github.com/users/defunkt \
  --concurrency 10 \
  --output github-users.json \
  --transform "data => ({ name: data.name, followers: data.followers })"
```

### **OpÃ§Ãµes DisponÃ­veis**

| OpÃ§Ã£o                        | DescriÃ§Ã£o               | PadrÃ£o |
| ---------------------------- | ----------------------- | ------ |
| `-c, --concurrency <number>` | Requests simultÃ¢neos    | `5`    |
| `-s, --selector <string>`    | Seletor CSS para HTML   | -      |
| `-o, --output <file>`        | Arquivo de saÃ­da        | -      |
| `-t, --transform <function>` | FunÃ§Ã£o de transformaÃ§Ã£o | -      |

---

## ğŸ—ï¸ Arquitetura

```
src/
â”œâ”€â”€ types/           # ğŸ¯ Tipos TypeScript avanÃ§ados
â”‚   â””â”€â”€ index.ts     # Generics, condicionais, utility types
â”œâ”€â”€ decorators/      # âœ¨ Decorators para metaprogramaÃ§Ã£o
â”‚   â””â”€â”€ index.ts     # @measure, @retry
â”œâ”€â”€ streams/         # ğŸŒŠ Sistema de streams customizado
â”‚   â””â”€â”€ index.ts     # Transform/Writable streams
â”œâ”€â”€ workers/         # âš¡ Worker threads para paralelismo
â”‚   â””â”€â”€ scraper-worker.ts
â”œâ”€â”€ scraper/         # ğŸ”„ Async iterators e controle de concorrÃªncia
â”‚   â””â”€â”€ async-iterator.ts
â”œâ”€â”€ cli/             # ğŸ–¥ï¸ Interface de linha de comando
â”‚   â””â”€â”€ index.ts     # Commander.js + progress bars
â””â”€â”€ index.ts         # ğŸšª Entry point
```

---

## ğŸ’¡ Exemplos PrÃ¡ticos

### **1. Monitoramento de APIs**

```bash
# Verificar status de mÃºltiplos serviÃ§os
node dist/index.js scrape \
  https://httpbin.org/status/200 \
  https://httpbin.org/status/404 \
  https://httpbin.org/delay/2 \
  --concurrency 3 \
  --output health-check.json
```

### **2. Coleta de Dados JSON**

```bash
# Extrair dados especÃ­ficos de APIs
node dist/index.js scrape \
  https://jsonplaceholder.typicode.com/posts/1 \
  https://jsonplaceholder.typicode.com/posts/2 \
  --transform "data => ({ id: data.id, title: data.title })" \
  --output posts.json
```

---

## ğŸ“ˆ Performance

### **Benchmarks TÃ­picos**

- âš¡ **ConcorrÃªncia**: AtÃ© 20 requests simultÃ¢neos
- ğŸ”„ **Throughput**: ~100-500 URLs/minuto (dependendo da API)
- ğŸ’¾ **MemÃ³ria**: Uso otimizado com streams (processo constante)
- ğŸ›¡ï¸ **Confiabilidade**: Retry automÃ¡tico + timeout por worker

---

## ğŸ¤ Contribuindo

Este Ã© um projeto de aprendizado, mas contribuiÃ§Ãµes sÃ£o bem-vindas!

1. Fork o projeto
2. Crie uma feature branch (`git checkout -b feature/nova-funcionalidade`)
3. Commit suas mudanÃ§as (`git commit -m 'Adiciona nova funcionalidade'`)
4. Push para a branch (`git push origin feature/nova-funcionalidade`)
5. Abra um Pull Request

---

## ğŸ‘¨â€ğŸ’» Autor

- LinkedIn: [Gabrielli M. Feletti](https://www.linkedin.com/in/gabrielli-mombrini-feletti/)
